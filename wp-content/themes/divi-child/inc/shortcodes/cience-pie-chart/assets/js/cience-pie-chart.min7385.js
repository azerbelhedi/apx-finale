"use strict";!function(w){w(".cience-pie-chart").each(function(){var t=w(this).parent().find("ul"),e=t.data("columns");e=!!e&&e.split("|");var a=[],i=["#1e88e5","#da4437","#f5b400","#0e9d58","#ab47bc","#00acc1","#ff6e43","#9e9d24","#5c6cc0","#f06292","#999999"],n=[],r=0,c=[],d=t.find("li"),l=w(this).parent().find("h1"),s=!!l.length&&l.detach().text();d.each(function(){var t=w(this).find("strong");t=t.length?parseInt(t.text()):0,w(this).find("strong").detach();var e=w.trim(w(this).text());5<t?(n.push(t),c.push(e)):r+=t,a.push({label:e,number:t}),w(this).remove()}),n.push(r),c.push("Others");var o={datasets:[{data:n,backgroundColor:i,borderWidth:0}],labels:c},p="cience-pie-chart-"+Math.floor(100*Math.random()+1);w(this).html('<canvas id="'+p+'" width="400" height="400"></canvas>'),w(this).wrap("<div class='cience-pie-chart-wrap'></div>");var h=w(this).closest(".cience-pie-chart-wrap");h.append("<div class='cience-pie-chart-legend'></div>");var f=h.find(".cience-pie-chart-legend");s&&f.append("<div class='title'>"+s+"</div>"),f.append("<ul class='cience-pie-chart-leglist'></ul>");for(var b=h.find(".cience-pie-chart-leglist"),u=0;u<c.length;u++)b.append("<li style='color:"+i[u]+"'><span>"+c[u]+"</span></li>");f.append("<div class='button-wrap'><a class='et_pb_button cience-button and-more' href='#modal-pie-table'>And more</a></div>"),f.append("<div class='cience-pie-chart-table-wrap'><div id=\"pie-table\" class='cience-pie-chart-table'><table><tbody></tbody></table></div></div>");var v=f.find(".cience-pie-chart-table");if(e){v.find("table").prepend("<thead><tr></tr></thead>");for(var g=0;g<e.length;g++)v.find("thead tr").append("<th>"+e[g]+"</th>")}for(var m=0;m<a.length;m++)v.find("tbody").append("<tr><td>"+(m+1)+"</td><td>"+a[m].label+"</td><td>"+a[m].number+"</td></tr>");var y=w("#"+p);new Chart(y,{type:"pie",data:o,options:{legend:{display:!1,position:"right"},tooltips:{backgroundColor:"#ffffff",callbacks:{labelColor:function(t,e){return{borderColor:"#cccccc",backgroundColor:"#ffffff"}},labelTextColor:function(t,e){return"#000000"}}},plugins:{datalabels:{formatter:function(t,e){var a=0;e.chart.data.datasets[0].data.map(function(t){a+=t});var i=(100*t/a).toFixed(2);return 4<i?i+"%":""},color:"#fff",anchor:"end",offset:20,align:"start",display:function(t){}}}}})})}(jQuery);
//# sourceMappingURL=cience-pie-chart.min.js.map